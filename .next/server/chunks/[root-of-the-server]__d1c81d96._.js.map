{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/TogsO/OneDrive/Desktop/ProjetWeb/app/api/send-email/route.js"],"sourcesContent":["import nodemailer from \"nodemailer\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\n// GET pour tester que l'API fonctionne\r\nexport async function GET() {\r\n  return NextResponse.json({\r\n    message: \"API send-email fonctionne !\",\r\n    status: \"OK\",\r\n    timestamp: new Date().toISOString(),\r\n  });\r\n}\r\n\r\n// POST pour envoyer l'email\r\nexport async function POST(request) {\r\n  try {\r\n    const { nom, prenom, email, entreprise, fonction, motivations } =\r\n      await request.json();\r\n\r\n    // V√©rification des champs requis\r\n    if (!nom || !prenom || !email || !entreprise || !fonction) {\r\n      return NextResponse.json(\r\n        { message: \"Tous les champs sont requis\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Configuration du transporteur Gmail\r\n    const transporter = nodemailer.createTransport({\r\n      service: \"gmail\",\r\n      auth: {\r\n        user: process.env.GMAIL_USER,\r\n        pass: process.env.GMAIL_APP_PASSWORD,\r\n      },\r\n    });\r\n\r\n    // Configuration de l'email\r\n    const mailOptions = {\r\n      from: process.env.GMAIL_USER,\r\n      to: \"salimdjaffer.23@gmail.com\", // Changez par votre vraie adresse email\r\n      subject: `Nouvelle demande d'adh√©sion - ${nom} ${prenom}`,\r\n      html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\r\n          <div style=\"background: linear-gradient(135deg, #1d4ed8 0%, #3b82f6 100%); color: white; padding: 30px; border-radius: 10px 10px 0 0; text-align: center;\">\r\n            <h1 style=\"margin: 0; font-size: 28px;\">Nouvelle Demande d'Adh√©sion</h1>\r\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9;\">Association Nationale de la Promotion du Num√©rique en Alg√©rie</p>\r\n          </div>\r\n          \r\n          <div style=\"background-color: #f8fafc; padding: 30px; border: 1px solid #e2e8f0;\">\r\n            <h2 style=\"color: #1e293b; margin-top: 0; border-bottom: 2px solid #3b82f6; padding-bottom: 10px;\">üë§ Informations du Candidat</h2>\r\n            \r\n            <div style=\"display: grid; gap: 15px;\">\r\n              <div style=\"background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #3b82f6;\">\r\n                <strong style=\"color: #475569;\">Nom complet :</strong> ${nom} ${prenom}\r\n              </div>\r\n              <div style=\"background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #10b981;\">\r\n                <strong style=\"color: #475569;\">Email :</strong> <a href=\"mailto:${email}\" style=\"color: #10b981;\">${email}</a>\r\n              </div>\r\n              <div style=\"background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #f59e0b;\">\r\n                <strong style=\"color: #475569;\">Entreprise :</strong> ${entreprise}\r\n              </div>\r\n              <div style=\"background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #8b5cf6;\">\r\n                <strong style=\"color: #475569;\">Fonction :</strong> ${fonction}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          ${\r\n            motivations\r\n              ? `\r\n          <div style=\"background-color: #eff6ff; padding: 25px; border: 1px solid #bfdbfe;\">\r\n            <h2 style=\"color: #1e40af; margin-top: 0; border-bottom: 2px solid #3b82f6; padding-bottom: 10px;\">üí≠ Motivations et Exp√©rience</h2>\r\n            <div style=\"background: white; padding: 20px; border-radius: 8px; line-height: 1.6; white-space: pre-line;\">${motivations}</div>\r\n          </div>\r\n          `\r\n              : \"\"\r\n          }\r\n          \r\n          <div style=\"background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 25px; border: 1px solid #f59e0b; border-radius: 8px; margin: 20px 0;\">\r\n            <h3 style=\"color: #92400e; margin-top: 0; display: flex; align-items: center;\">\r\n              ‚ö†Ô∏è Rappel des Conditions d'Adh√©sion\r\n            </h3>\r\n            <ul style=\"color: #92400e; margin: 15px 0; padding-left: 20px;\">\r\n              <li style=\"margin: 8px 0;\">‚úì Fonction de DSI ou √©quivalent</li>\r\n              <li style=\"margin: 8px 0;\">‚úì Justificatif d'activit√© professionnelle</li>\r\n              <li style=\"margin: 8px 0;\">‚úì Recommandation de deux membres</li>\r\n              <li style=\"margin: 8px 0;\">‚úì Cotisation annuelle</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div style=\"background-color: #f1f5f9; padding: 20px; border-radius: 8px; text-align: center; font-size: 14px; color: #64748b; margin-top: 30px;\">\r\n            <p style=\"margin: 0;\">üìß Email envoy√© automatiquement depuis le site web ANAPNA</p>\r\n            <p style=\"margin: 5px 0 0 0;\">üïí ${new Date().toLocaleDateString(\r\n              \"fr-FR\",\r\n              {\r\n                weekday: \"long\",\r\n                year: \"numeric\",\r\n                month: \"long\",\r\n                day: \"numeric\",\r\n                hour: \"2-digit\",\r\n                minute: \"2-digit\",\r\n              }\r\n            )}</p>\r\n          </div>\r\n        </div>\r\n      `,\r\n    };\r\n\r\n    // Envoi de l'email\r\n    await transporter.sendMail(mailOptions);\r\n\r\n    console.log(`Email envoy√© avec succ√®s pour ${nom} ${prenom}`);\r\n\r\n    return NextResponse.json({\r\n      message: \"Demande d'adh√©sion envoy√©e avec succ√®s\",\r\n      timestamp: new Date().toISOString(),\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'envoi de l'email:\", error);\r\n\r\n    return NextResponse.json(\r\n      {\r\n        message: \"Erreur lors de l'envoi de l'email\",\r\n        error: error.message,\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe;IACpB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QACvB,SAAS;QACT,QAAQ;QACR,WAAW,IAAI,OAAO,WAAW;IACnC;AACF;AAGO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,WAAW,EAAE,GAC7D,MAAM,QAAQ,IAAI;QAEpB,iCAAiC;QACjC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC,UAAU;YACzD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA8B,GACzC;gBAAE,QAAQ;YAAI;QAElB;QAEA,sCAAsC;QACtC,MAAM,cAAc,iJAAA,CAAA,UAAU,CAAC,eAAe,CAAC;YAC7C,SAAS;YACT,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,UAAU;gBAC5B,MAAM,QAAQ,GAAG,CAAC,kBAAkB;YACtC;QACF;QAEA,2BAA2B;QAC3B,MAAM,cAAc;YAClB,MAAM,QAAQ,GAAG,CAAC,UAAU;YAC5B,IAAI;YACJ,SAAS,CAAC,8BAA8B,EAAE,IAAI,CAAC,EAAE,QAAQ;YACzD,MAAM,CAAC;;;;;;;;;;;;uEAY0D,EAAE,IAAI,CAAC,EAAE,OAAO;;;iFAGN,EAAE,MAAM,0BAA0B,EAAE,MAAM;;;sEAGrD,EAAE,WAAW;;;oEAGf,EAAE,SAAS;;;;;UAKrE,EACE,cACI,CAAC;;;wHAGuG,EAAE,YAAY;;UAE5H,CAAC,GACK,GACL;;;;;;;;;;;;;;;;6CAgBkC,EAAE,IAAI,OAAO,kBAAkB,CAC9D,SACA;gBACE,SAAS;gBACT,MAAM;gBACN,OAAO;gBACP,KAAK;gBACL,MAAM;gBACN,QAAQ;YACV,GACA;;;MAGR,CAAC;QACH;QAEA,mBAAmB;QACnB,MAAM,YAAY,QAAQ,CAAC;QAE3B,QAAQ,GAAG,CAAC,CAAC,8BAA8B,EAAE,IAAI,CAAC,EAAE,QAAQ;QAE5D,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,WAAW,IAAI,OAAO,WAAW;QACnC;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QAEpD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO,MAAM,OAAO;QACtB,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}